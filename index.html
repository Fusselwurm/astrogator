<html>
<head>
	<title>astrogat0r</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript" src="./vector.js"></script>
	<script type="text/javascript" src="./lib.js"></script>
	<script type="text/javascript" src="./test.js"></script>
	<style type="text/css">
		canvas {
			border: 5px solid black;
		}
	</style>
</head>
<body>
<h1>buttons</h1>
<button id="btnClear">clear</button>
<button id="btnStop">stop</button>
<button id="btnGo">go</button>

<h2>canvas</h2>

<canvas id="space"  width="500" height="500"></canvas>

<script type="text/javascript">

var cnvs = document.getElementById('space');
var ctx = cnvs.getContext('2d');
ctx.fillStyle = "rgba(255, 255, 0, 1)";

scale = 1;
move.onChange((function () {
	//var cnt = {};
	return function (body) {
/*		cnt[body.name] = (cnt[body.name] || 0) + 1;
		if (cnt[body.name] % 5) {
			return;
		}*/

		var posTranslated = body.position.map(function (v) {
			return v * scale;
		});

		switch (body.name) {
			case 0: ctx.fillStyle = "rgba(0, 255, 0, 1)"; break;
			case 1: ctx.fillStyle = "rgba(255, 0, 0, 1)"; break;
			case 2: ctx.fillStyle = "rgba(0, 0, 255, 1)"; break;
			default: throw 'mwahah';
		}

		ctx.fillRect(posTranslated[0], posTranslated[1], 5, 5);
	};
}()));

</script>

<script type="text/javascript">

	var tick = 0;

	b1 = {
		name: 0,
		mass: 1e12,
		position: new Vector([200, 190, 200]),
		vector: new Vector([0, 0.75, 0])
	};

	b2 = {
		name: 1,
		mass: 5e12,
		position: new Vector([250, 250, 5]),
		vector: new Vector([.02, -0.15, .02])
	};

	b3 = {
		name: 2,
		mass: 1e10,
		position: new Vector([300, 300, 5]),
		vector: new Vector([0, -1, 0])
	};

	$(document).ready(function () {
		$('#btnGo').click(function () {
		    	tick = setInterval(function () {
				move([b1, b2, b3], 1);
			}, 0);
		});
		$('#btnStop').click(function () {
			clearInterval(tick);
		});
		$('#btnClear').click(function () {
			ctx.clearRect(0, 0, 500, 500);
		});

		setInterval(function () {
			ctx.fillStyle = "rgba(255, 255, 255, 0.1)";
			ctx.fillRect(0, 0, 500, 500);
		}, 1000);
	})
</script>
</body>
</html>
